{% extends 'base.html' %}

{% block content %}
        <form action="/form_select" method="POST">
            <div class="selection-area centred flex-rows rows-spaced-even">
                <input type="radio" name="games_names" value="omni" id="omniSelect" style="display: none;">
                <input type="radio" name="games_names" value="genshin" id="genSelect" style="display: none;">
                <input type="radio" name="games_names" value="wor" id="worSelect" style="display: none;">

                <label for="omniSelect">
                    <img src="/static/images/omni_select.jpg" alt="Select OmniHeroes">
                </label>
                <label for="genSelect">
                    <img src="/static/images/gen_select.jpg" alt="Select Genshin Impact">
                </label>
                <label for="worSelect">
                    <img src="/static/images/wor_select.jpg" alt="Select Watcher of Realms">
                </label>
            </div>
                    <!-- Submit Button -->
        <button type="submit" style="display: none;">Submit</button>
        </form>
        <hr>
<section class ="roboto-medium">
    <p>Click on an image above to add a new record into the tracker</p>
</section>
<script>
    // Select all label elements
    document.querySelectorAll('label').forEach(function(label) {
        label.addEventListener('click', function() {
            // Trigger the radio button selection manually if not already selected
            const radio = document.querySelector(`input[name="games_names"]:checked`);
            if (!radio) {
                // If no radio button is selected, trigger it manually
                const radioId = label.getAttribute('for');
                const selectedRadio = document.getElementById(radioId);
                selectedRadio.checked = true;
            }
            
            // Check if the radio is selected and submit the form
            const selectedRadio = document.querySelector('input[name="games_names"]:checked');
            console.log(selectedRadio); // Should log the selected radio button

            if (selectedRadio) {
                this.closest('form').submit(); // Submit the form if the radio is checked
            }
        });
    });
</script>
{% endblock %}